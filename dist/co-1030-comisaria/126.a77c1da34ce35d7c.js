"use strict";(self.webpackChunkCO_1030_COMISARIA=self.webpackChunkCO_1030_COMISARIA||[]).push([[126],{6126:(H,f,s)=>{s.d(f,{k:()=>F});var l=s(2075),C=s(490),i=s(4854),d=s(2070),t=s(5e3),m=s(5698),A=s(520);let v=(()=>{class e{constructor(a){this.http=a,this.api=i.n6}consultar(a,o){return this.http.get(`${i.n6}/Quorum/ListaInvolucradosQuorum/${a}/${o}`).pipe((0,m.q)(1))}obtenerQuorum(a){return this.http.get(`${i.n6}/Programacion/ObtenerQuorum?idTarea=${a}`).pipe((0,m.q)(1))}guardarQuorum(a){return this.http.post(`${i.n6}/File/GuardarQuorum`,a).pipe((0,m.q)(1))}actualizarEstadoQuorum(a){return this.http.post(`${i.n6}/Programacion/ActualizarQuorum`,a).pipe((0,m.q)(1))}actualizarProgramacionQuorum(a){return this.http.post(`${i.n6}/Programacion/ActualizarProgramacionQuorum`,a).pipe((0,m.q)(1))}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(A.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=s(9082),T=s(509),Q=s(8966),S=s(8385),p=s(9808),b=s(7423),E=s(9772),Z=s(5245),M=s(1763),N=s(6087),g=s(3075);const R=["paginator"];function J(e,r){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Nombre del implicado "),t.qZA())}function I(e,r){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const a=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.nombreInvolucrado)," ")}}function q(e,r){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Tipo de implicado "),t.qZA())}function O(e,r){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const a=r.$implicit;t.xp6(1),t.AsE(" ",a.esVictima?"Accionante":"Accionado"," ",a.esPricipal?"Principal":""," ")}}function U(e,r){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Estado asistencia "),t.qZA())}function k(e,r){1&e&&(t.TgZ(0,"div"),t._uU(1,"No Asiste"),t.qZA())}function D(e,r){1&e&&(t.TgZ(0,"div"),t._uU(1,"Asiste"),t.qZA())}function P(e,r){1&e&&(t.TgZ(0,"div"),t._uU(1,"Excusa con justa causa"),t.qZA())}function y(e,r){1&e&&(t.TgZ(0,"div"),t._uU(1,"Excusa sin justa causa"),t.qZA())}function w(e,r){1&e&&t._UZ(0,"div")}function Y(e,r){if(1&e&&(t.TgZ(0,"mat-cell")(1,"div",23),t.YNc(2,k,2,0,"div",24),t.YNc(3,D,2,0,"div",24),t.YNc(4,P,2,0,"div",24),t.YNc(5,y,2,0,"div",24),t.YNc(6,w,1,0,"div",25),t.qZA()()),2&e){const a=r.$implicit;t.xp6(1),t.Q6J("ngSwitch",a.estado),t.xp6(1),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3)}}function z(e,r){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1," Acciones "),t.qZA())}const h=function(e,r){return{"table-icon-color":e,"text-secondary":r}},B=function(e,r){return{idSolicitud:e,idArchivo:r}};function L(e,r){if(1&e){const a=t.EpF();t.TgZ(0,"mat-cell",26)(1,"button",27),t.NdJ("click",function(){const c=t.CHM(a).$implicit;return t.oxw().marcarAsistio(c)}),t.TgZ(2,"mat-icon",28),t._uU(3,"check_circle"),t.qZA()(),t.TgZ(4,"button",29),t.NdJ("click",function(){const c=t.CHM(a).$implicit;return t.oxw().marcarNoAsiste(c)}),t.TgZ(5,"mat-icon",28),t._uU(6,"cancel"),t.qZA()(),t.TgZ(7,"app-carga-archivo",30),t.NdJ("baseArchivo",function(n){const u=t.CHM(a).$implicit;return t.oxw().cargarExcusa(n,u)}),t.qZA(),t.TgZ(8,"button",31),t.NdJ("click",function(){const c=t.CHM(a).$implicit;return t.oxw().marcarJustaCausa(c)}),t.TgZ(9,"mat-icon",28),t._uU(10,"task"),t.qZA()()()}if(2&e){const a=r.$implicit,o=t.oxw();t.xp6(1),t.Q6J("disabled",o.isAsiste(a)),t.xp6(1),t.Q6J("ngClass",t.WLB(11,h,!o.isAsiste(a),o.isAsiste(a))),t.xp6(2),t.Q6J("disabled",o.isNoAsiste(a)&&(!a.idAnexo||-1!==a.idAnexo)),t.xp6(1),t.Q6J("ngClass",t.WLB(14,h,!o.isNoAsiste(a),o.isNoAsiste(a))),t.xp6(2),t.Q6J("archivoCargado",t.WLB(17,B,o.tarea.idSolicitud,a.idAnexo?a.idAnexo:-1))("disableDownload",!a.idAnexo||-1==a.idAnexo)("reset",!1)("deleteIcon",!1)("reset",!0),t.xp6(1),t.Q6J("disabled",!o.isArchivoCargado(a)||o.isJustaCausa(a)),t.xp6(1),t.Q6J("ngClass",t.WLB(20,h,!o.isJustaCausa(a)||o.isArchivoCargado(a),!o.isArchivoCargado(a)||o.isJustaCausa(a)))}}function G(e,r){1&e&&t._UZ(0,"mat-header-row",32)}function $(e,r){1&e&&t._UZ(0,"mat-row")}const j=function(){return[5,10,20]};let F=(()=>{class e{constructor(a,o,n,c,u,_){this.quorumService=a,this.sharedService=o,this.authService=n,this.dialog=c,this.modales=u,this.router=_,this.tarea=JSON.parse(sessionStorage.getItem("info")),this.columnas=["nombreInvolucrado","estado","esVictima","accion"],this.dataSource=new l.by([]),this.radioReprogramar=!1}ngOnInit(){this.user=this.authService.currentUserValue,this.consultar()}consultar(){this.quorumService.obtenerQuorum(this.tarea.idTarea).subscribe({next:a=>{var o,n,c,u;a&&200===a.statusCode&&(this.idProgramacion=null===(o=a.data)||void 0===o?void 0:o.idProgramacion,this.idSolicitudServicio=null===(n=a.data)||void 0===n?void 0:n.idSolicitudServicio,this.radioReprogramar=null===(c=a.data)||void 0===c?void 0:c.reprogramada,this.dataSource.data=null===(u=a.data)||void 0===u?void 0:u.quorums,this.dataSource.paginator=this.paginator)},error:a=>{this.modales.modalInformacion(i.q4.MENSAJE_ERROR_G)}})}isNoAsiste(a){return-1==a.estado||a.estado==i.rM.NO_ASISTE}isAsiste(a){return a.estado==i.rM.ASISTE}isArchivoCargado(a){return a.idAnexo>0}isJustaCausa(a){return a.estado==i.rM.EXCUSA_JUSTA}cargarExcusa(a,o){o.estado=i.rM.EXCUSA_INJUSTA,a&&this.guardarQuorum(o,a)}guardarQuorum(a,o=""){var n;const c=a.estado==i.rM.EXCUSA_INJUSTA;this.quorumService.guardarQuorum({entrada:c?o:"",idAnexo:a.idAnexo>0?a.idAnexo:0,idQuorum:a.idQuorum>0?a.idQuorum:0,idEstado:a.estado,idInvolucrado:a.idInvolucrado,idSolicitudServicio:this.tarea.idSolicitud,idTarea:this.tarea.idTarea,idUsuario:null===(n=this.user)||void 0===n?void 0:n.userID,tipoDocumento:i.n7.ASISTENCIA_QUORUM}).subscribe(u=>{u&&200==u.statusCode?(this.consultar(),this.modales.modalExito(c?"Excusa cargada exitosamente.":"Asistencia marcada existosamente")):this.modales.modalInformacion(i.q4.MENSAJE_ERROR_G)})}marcarAsistio(a){a.estado=i.rM.ASISTE,a.idQuorum&&a.idQuorum>0?this.actualizarQuorum(a):this.guardarQuorum(a)}marcarNoAsiste(a){a.estado=i.rM.NO_ASISTE,this.actualizarQuorum(a)}marcarJustaCausa(a){a.estado=i.rM.EXCUSA_JUSTA,this.actualizarQuorum(a)}actualizarQuorum(a){a.idQuorum&&a.idQuorum>0&&this.quorumService.actualizarEstadoQuorum({idEstado:a.estado,idQuorum:a.idQuorum,idAnexo:0}).subscribe({next:o=>{o&&200==o.statusCode&&(this.consultar(),this.modales.modalExito("Estado del quorum actualizado exitosamente."))},error:()=>{this.modales.modalInformacion(i.q4.MENSAJE_ERROR_G)}})}cerrarActuaciones(a=!1){this.modales.modalCerrarActuaciones(this.tarea,void 0,this.isAsistenTodos?"0":"1")}modalConfirmaCerrarActuacion(){d.B.modalConfirmacion(i.q4.MENSAJE_CERRAR_ACT,this.dialog,i.x4.EXCLAMACION).subscribe(a=>{a&&this.guardar(!0)})}crearEtiqueta(){this.sharedService.crearEtiqueta({valorEtiqueta:this.radioReprogramar?"1":"0",idsolicitudServicio:this.tarea.idSolicitud,idtarea:this.tarea.idTarea}).subscribe({next:o=>{o&&o.statusCode===i.jh.OK?this.cerrarActuacion():d.B.modalInformacion(i.q4.MENSAJE_ERROR_G,this.dialog,i.x4.EXCLAMACION)},error:()=>{d.B.modalInformacion(i.q4.MENSAJE_ERROR_G,this.dialog,i.x4.EXCLAMACION)}})}guardar(a=!1){this.quorumService.actualizarProgramacionQuorum(this.getObjGuardar()).subscribe({next:o=>{o.statusCode===i.jh.OK?a?this.cerrarActuacion():this.modales.modalExito("Se ha guardado la informacion"):d.B.modalInformacion(i.q4.MENSAJE_ERROR_G,this.dialog,i.x4.EXCLAMACION)},error:()=>{d.B.modalInformacion(i.q4.MENSAJE_ERROR_G,this.dialog,i.x4.EXCLAMACION)}})}getObjGuardar(){return{idProgramacion:this.idProgramacion,idSolicitudServicio:this.idSolicitudServicio,reprogramada:this.radioReprogramar,faltantes:!this.isAsistenTodos}}cerrarActuacion(){var a,o;this.sharedService.cerrarActuaciones({tareaID:this.tarea.idTarea,perfilCod:null===(a=this.user)||void 0===a?void 0:a.perfil,userID:null===(o=this.user)||void 0===o?void 0:o.userID,valorEtiqueta:this.isAsistenTodos?"0":"1"}).subscribe(n=>{var c;if(n&&200==n.statusCode){sessionStorage.removeItem("info");let u=C._.getRutaPerfil(null===(c=this.user)||void 0===c?void 0:c.perfil)[0].ruta;this.router.navigate([u])}else d.B.modalInformacion(i.q4.MENSAJE_ERROR_G,this.dialog,i.x4.EXCLAMACION)})}get isAsistenTodos(){return!this.dataSource.data.find(a=>a.estado==i.rM.NO_ASISTE)}cancelar(){this.modales.modalCancelar(this.tarea.pathRetorno?this.tarea.pathRetorno:void 0)}archivarDiligencias(){this.modales.modalArchivarDiligencias(this.tarea)}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(v),t.Y36(x.F),t.Y36(T.e),t.Y36(Q.uw),t.Y36(d.B),t.Y36(S.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-quorum"]],viewQuery:function(a,o){if(1&a&&t.Gf(R,5),2&a){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first)}},decls:48,vars:12,consts:[[1,"background-content-private","p-4","mb-3"],[1,"p-4"],[1,"text-blue","text-uppercase"],["id","table-private",3,"dataSource"],["matColumnDef","nombreInvolucrado"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","esVictima"],["matColumnDef","estado"],["matColumnDef","accion"],["class","d-flex align-items-center w-100",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of request",3,"pageSizeOptions"],["paginator",""],[1,"form-group","col-lg-12","mb-4","mt-4"],[1,"form-check","form-check-inline"],["type","radio","name","radioReprogramar",1,"form-check-input",3,"ngModel","value","ngModelChange"],[1,"form-check-label"],["type","radio","name","radioReprogramar",1,"form-check-input",3,"value","ngModel","ngModelChange"],[1,"d-flex","align-items-center","justify-content-end","mt-4","text-nowrap","flex-wrap","w-100",2,"gap","1rem"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"d-flex","align-items-center","w-100"],["mat-icon-button","","matTooltip","Marcar que asiste","matTooltipPosition","right","matTooltipHideDelay","500","matTooltipClass","background-tooltip",3,"disabled","click"],[1,"material-icons-outlined",3,"ngClass"],["mat-icon-button","","matTooltip","Marcar que no asiste","matTooltipPosition","right","matTooltipHideDelay","500","matTooltipClass","background-tooltip",3,"disabled","click"],["apariencia","icon","textoCargar","Cargar excusa","textoDescargar","Descargar excusa",3,"archivoCargado","disableDownload","reset","deleteIcon","baseArchivo"],["mat-icon-button","","matTooltip","Marcar como excusa justa","matTooltipPosition","right","matTooltipHideDelay","500","matTooltipClass","background-tooltip",3,"disabled","click"],["mat-header-row",""]],template:function(a,o){1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h4",2),t._uU(3,"VERIFICAR COMPARECENCIA"),t.qZA(),t.TgZ(4,"p"),t._uU(5," Confirme la comparecencia de las partes para el correcto diligenciamiento del fallo "),t.qZA(),t.TgZ(6,"div")(7,"mat-table",3),t.ynx(8,4),t.YNc(9,J,2,0,"mat-header-cell",5),t.YNc(10,I,3,3,"mat-cell",6),t.BQk(),t.ynx(11,7),t.YNc(12,q,2,0,"mat-header-cell",5),t.YNc(13,O,2,2,"mat-cell",6),t.BQk(),t.ynx(14,8),t.YNc(15,U,2,0,"mat-header-cell",5),t.YNc(16,Y,7,5,"mat-cell",6),t.BQk(),t.ynx(17,9),t.YNc(18,z,2,0,"mat-header-cell",5),t.YNc(19,L,11,23,"mat-cell",10),t.BQk(),t.YNc(20,G,1,0,"mat-header-row",11),t.YNc(21,$,1,0,"mat-row",12),t.qZA(),t._UZ(22,"mat-paginator",13,14),t.qZA(),t.TgZ(24,"div",15)(25,"h4",2),t._uU(26),t.qZA(),t.TgZ(27,"p"),t._uU(28),t.qZA(),t.TgZ(29,"h6"),t._uU(30),t.qZA(),t.TgZ(31,"div",16)(32,"input",17),t.NdJ("ngModelChange",function(c){return o.radioReprogramar=c}),t.qZA(),t.TgZ(33,"label",18),t._uU(34," Si "),t.qZA()(),t.TgZ(35,"div",16)(36,"input",19),t.NdJ("ngModelChange",function(c){return o.radioReprogramar=c}),t.qZA(),t.TgZ(37,"label",18),t._uU(38," No "),t.qZA()()(),t.TgZ(39,"div",20)(40,"button",21),t.NdJ("click",function(){return o.cancelar()}),t._uU(41," Cancelar "),t.qZA(),t.TgZ(42,"button",22),t.NdJ("click",function(){return o.archivarDiligencias()}),t._uU(43," Archivar diligencias "),t.qZA(),t.TgZ(44,"button",22),t.NdJ("click",function(){return o.guardar()}),t._uU(45," Guardar "),t.qZA(),t.TgZ(46,"button",22),t.NdJ("click",function(){return o.modalConfirmaCerrarActuacion()}),t._uU(47," Cerrar actuaciones "),t.qZA()()()()),2&a&&(t.xp6(7),t.Q6J("dataSource",o.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",o.columnas),t.xp6(1),t.Q6J("matRowDefColumns",o.columnas),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(11,j)),t.xp6(4),t.hij(" Reprogramar ",o.tarea.tipoProceso.toLowerCase().includes("seguimiento")?"el seguimiento":"la audiencia"," "),t.xp6(2),t.hij(" ",o.tarea.tipoProceso.toLowerCase().includes("seguimiento")?"El seguimiento":"La audiencia"," es reprogramable siempre que uno de los involucrados principales haya presentado una excusa v\xe1lida. "),t.xp6(2),t.hij(" \xbfDesea reprogramar ",o.tarea.tipoProceso.toLowerCase().includes("seguimiento")?"el seguimiento":"la audiencia","? "),t.xp6(2),t.Q6J("ngModel",o.radioReprogramar)("value",!0),t.xp6(4),t.Q6J("value",!1)("ngModel",o.radioReprogramar))},directives:[l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,p.RF,p.n9,p.ED,b.lW,E.gM,Z.Hw,p.mk,M.k,l.as,l.XQ,l.nj,l.Gk,N.NW,g._,g.Fj,g.JJ,g.On],pipes:[p.rS],styles:[".fondoModal>.mat-dialog-container{background:var(--athens) 0% 0% no-repeat padding-box!important;border-radius:15px;overflow:hidden;position:relative;z-index:1}.texto-pequeno[_ngcontent-%COMP%]{font-size:var(--font-14);font-weight:500;padding-bottom:5px;padding-left:5px}.encabezado-titulo[_ngcontent-%COMP%]{background-color:#0168b3;border-top-left-radius:15px;border-top-right-radius:15px;margin:0!important;padding:20px}.encabezado-titulo[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{padding-left:2%;padding-right:9%;text-align:center;font-size:1.4rem;letter-spacing:1px}.titulo-entidad[_ngcontent-%COMP%]{padding-left:7%!important}.bg-verifique[_ngcontent-%COMP%]{background-color:#d1ecf1}.sinborde-DatePicker[_ngcontent-%COMP%]{border-right:0;background-color:#fff}.sinfondo-DatePicker[_ngcontent-%COMP%]{background-color:#fff}.input-group-text[_ngcontent-%COMP%]{padding:0}input.mat-input-element[_ngcontent-%COMP%]{margin-top:0}"]}),e})()}}]);